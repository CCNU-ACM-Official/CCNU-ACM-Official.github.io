---
title: 概率和期望
titleTemplate: 数学
---

### 概率

**概率：**事件发生的可能性的大小

在算法竞赛中，表示一个数的概率是几分之几，通常在模意义下，比如$\frac{3}{5}=3*5^{-1}$，其中$5^{-1}$表示$5$的乘法逆元。这个一般用费马小定理求出来。

**条件概率：**若已知事件$A$发生，在此条件下事件$B$发生的概率称为 **条件概率**，记作$P(B|A)$ ，满足
$$
P(B|A) = \frac{P(AB)}{P(A)}
$$
**概率乘法公式：**$P(AB) = P(A)P(B|A)$

**全概率公式：**若一组事件$A_1,...,A_n$两两不相交且和为$\Omega$，则对任意事件 $B$ 都有：
$$
P(B) = \sum_{i=1}^n{P(A_i)P(B|A_i)}
$$

- 应用：适用于直接计算事件 $B$ 发生的概率比较困难，则可以分析 $B$ 在哪些情况下可能发生。设可能导致事件 $B$ 发生的原因为 $A_1, A_2,..., A_n$，则在 $P(A_i)$和 $P(B|A_i)$ 已知时可以通过全概率公式计算事件 $B$ 发生的概率

<img src="https://raw.githubusercontent.com/fograinwater/PicGo-img/master/image-20230713083658883.png" alt="image-20230713083658883" style="zoom:50%;" />

**贝叶斯 Bayes 公式：**

在很多情况下，我们需要根据 **事件 $B$ 发生** 这一结果**反推**其各个原因事件发生的概率（已知结果求原因）。于是有：
$$
P(A_i|B) = \frac{P(A_iB)}{P(B)} = \frac{P(A_i)P(B|A_i)}{\sum_{j=1}^nP(A_j)P(B|A_j)}
$$

**事件的独立性：**

在研究条件概率的过程中，可能会出现 $P(B|A) = P(B)$ 的情况，直观上讲就是无论事件 $A$ 是否发生、以多大的概率发生，事件 $B$ 发生的概率都不会改变，即事件 $B$ 与 事件$A$ 无关。

定义：若事件 $A, B$ 满足
$$
P(AB) = P(A)P(B)
$$
则称事件$A, B$独立。同样的，对于多个事件 $A_1, A_2, ...,A_n$ ，我们称其独立，当且仅当对 **任意一组** 事件{$A_{ik}: 1 <= i_1 < i_2 < ...< i_k <= n$}都有
$$
P(A_{i1}A{i2}...A{ir}) = \sum_{k=1}^rP(A_{ik})
$$

### 随机变量

**1.随机变量的定义：**

随机变量表示随机试验各种结果的实值单值函数。通常，随机变量用大写，取到的某个样本值用小写。

简单来说，随机变量是指随机事件的**数量表现**。例如武汉夏天的气温；某地若干名男性健康成人中，每人血红蛋白量的测定值；等等。另有一些现象并不直接表现为数量，例如人口的男女性别、试验结果的阳性或阴性等，但我们可以规定男性为1，女性为0，则非数量标志也可以用数量来表示。

**2.分布函数**

对于随机变量 $X$ ，称函数 $F(x) = P(X <= x)$ 为随机变量 $X$ 的分布函数，记作 $X \sim F(x)$。有如下性质：

- 单调性：非递减
- $F(-\infty) = 0, F(+\infty) = 1$

<img src="https://raw.githubusercontent.com/fograinwater/PicGo-img/master/image-20230712153839813.png" alt="image-20230712153839813" style="zoom:67%;" />

**3.随机变量的分类：**

- 离散型

可用分布列描述离散型随机变量的概率分布<img src="https://raw.githubusercontent.com/fograinwater/PicGo-img/master/image-20230712153749074.png" alt="image-20230712153749074" style="zoom:50%;" />

- 连续型

可用密度函数描述连续型随机变量的概率分布

**密度函数**：设 $X\sim F(x)$，若存在一个非负函数 $f(x)$ 使得 
$$
F(x) = \int_{-\infty}^xf(x)dx
$$
则称 $f(x)$ 为随机变量 $X$ 的 密度函数。

<img src="https://raw.githubusercontent.com/fograinwater/PicGo-img/master/image-20230712154609666.png" alt="image-20230712154609666" style="zoom:67%;" />

### 期望

**期望的定义：**

简单说就是每一种可能性的答案加起来除以方案数。

比如$1,2,3$三个数排列，第一个数字的期望是多少？

有$6$种排列方式：

$(1,2,3),(1,3,2),(2,1,3),(2,3,1),(3,1,2),(3,2,1)$

期望就是$\frac{1+1+2+2+3+3}{6}=2$



1.离散型：设离散型随机变量 $X$ 的概率分布为 $p_i = P{X = x_i}$，若和式  $\sum{x_ip_i}$ 绝对收敛，则称其值为 $X$ 的期望，记作
$$
EX = \sum{x_ip_i}
$$
2.连续型：设连续型随机变量 $X$ 的密度函数为 $f(x)$。若积分 $\int_Rxf(x)dx$ 绝对收敛，则称其值为 $X$ 的期望，记作
$$
EX = \int_Rxf(x)dx
$$
**期望的性质：**

1.线性性

若随机变量 $X, Y$ 的期望存在，则

- 对任意实数 $a, b$，有 $E(aX + b) = a · EX + b$

- $E(X + Y) = EX + EY$

  注意：$E(AB)\neq E(A)*E(B)$

2.随机变量乘积的期望

若随机变量 $X, Y$ 的期望存在且 $X, Y$ 相互独立，则有
$$
E(XY) = EX · EY
$$

3.期望和概率转化（离散型）

$E(x)=\sum_{i=1}^nP(x=i)*i=\sum_{i=1}^nP(x\leq i)$



### 例题

一个$1*n$的格子，一开始第一个位置上有一个棋子，有一个$6$面的骰子，一个人不停地投骰子，投到几就往后挪几，超过$n$就在$n$停下。问期望投多少次到达$n$号点。

期望题经典套路：倒着递推。

设$dp[i]$表示，$i\sim n$这段期望要投多少次骰子。

一开始设$dp[n]=0$。

接下来，$dp[i]=\frac{\sum_{j=1}^6dp[i+j]}{6}+1$。对于$i+j\geq n$的位置，取$dp[i+j]=0$

因为期望问题，我们不知道开头的情况，而我们只知道结尾时的情况，等于是初始情况变成了最终情况，所以是倒着递推。

然后去枚举所有可能出现的情况，每一种情况的数值和加起来，除以情况数。

### 练习题

[P5104 红包发红包  ](https://www.luogu.com.cn/problem/P5104)

[P4316 绿豆蛙的归宿](https://www.luogu.com.cn/problem/P4316)

[P8774 [蓝桥杯 2022 省 A] 爬树的甲壳虫  ](https://www.luogu.com.cn/problem/P8774)

[P1291 [SHOI2002] 百事世界杯之旅  ](https://www.luogu.com.cn/problem/P1291)

